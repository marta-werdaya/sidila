<!DOCTYPE html>
<html lang="en">

<%- include('../../partials/header.ejs') %>

<body>
  <div id="app">
    <div class="main-wrapper">
      <%- include('../../partials/navbar.ejs') %>
      <%- include('../../partials/sidebar.ejs')%>
      <!-- Main Content -->
      <div class="main-content">
        <section class="section">
          <div class="section-header">
            <h1>Halaman Data Lansia</h1>
            <div class="section-header-breadcrumb">
              <div class="breadcrumb-item active"><a href="#">Dashboard</a></div>
              <div class="breadcrumb-item"><a href="#">Components</a></div>
              <div class="breadcrumb-item">Table</div>
            </div>
          </div>

          <%- include('table_lansia.ejs') %>
        </section>
      </div>
      <%- include('../../partials/footer.ejs') %>
    </div>
  </div>
  <%- include('../../partials/js.ejs') %>
  <!-- Modal -->
  <%- include('modal_delete.ejs') %>
  <%- include('modal_add.ejs') %>
  <%- include('modal_edit.ejs') %>

</body>

<script>
  $('#table-lansia').on('click', '.button-update', function () {
    let id = $(this).data('id');
    let nik = $(this).data('nik');
    let name = $(this).data('name');
    let place = $(this).data('place');
    let dateOfBirth = $(this).data('dateOfBirth');
    let address = $(this).data('address');
    let age = $(this).data('age');
    let villageid = $(this).data('villageid');
    let kecamatanId = $(this).data('kecamatanId');
    let village = $(this).data('village');
    let kecamatan = $(this).data('kecamatan');
    $('#edit-lansia').modal('show');
    $('.id').val(id);
    $('.nik').val(nik);
    $('.name').val(name);
    $('.place').val(place);
    $('.dateOfbirth').val(dateOfBirth);
    $('.address').val(address);
    $('.age').val(age);
    // $('.villageid').val(villageid);
    // $('.kecamatanId').val(kecamatanId);
    let selectedVillage = document.getElementById("selectVillage");
    let selectedSubDistrict = document.getElementById("selectSubDistrict");
    selectedVillage.text = village;
    selectedVillage.value = villageid;
    selectedSubDistrict.text = kecamatan;
    selectedSubDistrict.value = kecamatanId;
  }),
    $('#table-lansia').on('click', '.button-delete', function () {
      let id = $(this).data('id');
      $('#delete-lansia').modal('show');
      $('.id').val(id);
    });
  async function calculateAge() {
    let year = document.getElementById("dateOfbirth").value;
    let split = await year.split("-");
    let currentYear = await new Date().getFullYear();
    let age = await currentYear - split[0];
    let inputAge = document.getElementById("age");
    inputAge.value = age;

  }

</script>

</html>